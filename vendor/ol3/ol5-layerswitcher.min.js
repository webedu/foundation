/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/ol5-layerswitcher@1.1.5/src/ol5-layerswitcher.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Control from"ol/control/Control";import Observable from"ol/Observable";var CSS_PREFIX="layer-switcher-";export default class LayerSwitcher extends Control{constructor(e){var t=e||{},a=t.tipLabel?t.tipLabel:"Legend",n=document.createElement("div");super({element:n,target:t.target}),this.mapListeners=[],this.hiddenClassName="ol-unselectable ol-control layer-switcher",LayerSwitcher.isTouchDevice_()&&(this.hiddenClassName+=" touch"),this.shownClassName="shown",n.className=this.hiddenClassName;var i=document.createElement("button");i.setAttribute("title",a),n.appendChild(i),this.panel=document.createElement("div"),this.panel.className="panel",n.appendChild(this.panel),LayerSwitcher.enableTouchScroll_(this.panel),this.onOpacityChange=t.onOpacityChange||null,this.onLayerToggle=t.onLayerToggle||null;var s=this;i.onmouseover=function(e){s.showPanel()},i.onclick=function(e){e=e||window.event,s.showPanel(),e.preventDefault()},s.panel.onmouseout=function(e){e=e||window.event,s.panel.contains(e.toElement||e.relatedTarget)||s.hidePanel()}}setMap(e){for(var t=0;t<this.mapListeners.length;t++)Observable.unByKey(this.mapListeners[t]);if(this.mapListeners.length=0,super.setMap(e),e){var a=this;this.mapListeners.push(e.on("pointerdown",function(){a.hidePanel()})),this.renderPanel()}}showPanel(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}hidePanel(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}renderPanel(){LayerSwitcher.renderPanel(this.getMap(),this.panel)}static renderPanel(e,t){for(LayerSwitcher.ensureTopVisibleBaseLayerShown_(e);t.firstChild;)t.removeChild(t.firstChild);var a=document.createElement("ul");t.appendChild(a),LayerSwitcher.renderLayers_(e,e,a)}static ensureTopVisibleBaseLayerShown_(e){var t;LayerSwitcher.forEachRecursive(e,function(e,a,n){"base"===e.get("type")&&e.getVisible()&&(t=e)}),t&&LayerSwitcher.setVisible_(e,t,!0)}static setVisible_(e,t,a){t.setVisible(a),a&&"base"===t.get("type")&&LayerSwitcher.forEachRecursive(e,function(e,a,n){e!=t&&"base"===e.get("type")&&e.setVisible(!1)})}static renderLayer_(e,t,a){var n=document.createElement("li"),i=t.get("title"),s=LayerSwitcher.uuid(),r=document.createElement("label");if(t.getLayers&&!t.get("combine")){n.className="group",t.get("fold")&&(n.classList.add(CSS_PREFIX+"fold"),n.classList.add(CSS_PREFIX+t.get("fold")),r.onclick=function(e){LayerSwitcher.toggleFold_(t,n)}),r.innerHTML=i,n.appendChild(r);var l=document.createElement("ul");n.appendChild(l),LayerSwitcher.renderLayers_(e,t,l)}else{n.className="layer";var o=document.createElement("div"),c=document.createElement("input"),h=document.createElement("input");"base"===t.get("type")?(c.type="radio",c.name="base"):c.type="checkbox",c.id=s,c.checked=t.get("visible"),c.onchange=function(a){LayerSwitcher.setVisible_(e,t,a.target.checked)},o.appendChild(c),r.htmlFor=s,r.innerHTML=i;var d=e.getView().getResolution();if((d>t.getMaxResolution()||d<t.getMinResolution())&&(r.className+=" disabled"),o.appendChild(r),t.get("enableOpacitySliders")&&(h.type="range",h.className="opacity",h.min=0,h.max=1,h.step=.01,h.value=t.getOpacity(),h.onchange=function(e){t.setOpacity(e.target.value),null!==this_.onOpacityChange&&"function"==typeof this_.onOpacityChange&&this_.onOpacityChange(e.target.value,t)},o.appendChild(h)),n.appendChild(o),t.get("legend")){var p=document.createElement("div");p.className="legend",p.innerHTML=lyrOpt.legend,n.appendChild(t.get("legend"))}}return n}static renderLayers_(e,t,a){for(var n,i=t.getLayers().getArray().slice().reverse(),s=0;s<i.length;s++)(n=i[s]).get("title")&&a.appendChild(LayerSwitcher.renderLayer_(e,n,s))}static forEachRecursive(e,t){e.getLayers().forEach(function(e,a,n){t(e,a,n),e.getLayers&&LayerSwitcher.forEachRecursive(e,t)})}static uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}static enableTouchScroll_(e){if(LayerSwitcher.isTouchDevice_()){var t=0;e.addEventListener("touchstart",function(e){t=this.scrollTop+e.touches[0].pageY},!1),e.addEventListener("touchmove",function(e){this.scrollTop=t-e.touches[0].pageY},!1)}}static isTouchDevice_(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}static toggleFold_(e,t){t.classList.remove(CSS_PREFIX+e.get("fold")),e.set("fold","open"===e.get("fold")?"close":"open"),t.classList.add(CSS_PREFIX+e.get("fold"))}}window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);
//# sourceMappingURL=/sm/096c8be4972f343beaedd3b46fab63edef67aeef51c5e9b1ed8133ae2940efb5.map